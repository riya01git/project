var SearchBoxEvent,SearchBoxStatus,MiniHeaderEvent,MiniHeader;(function(n){n[n.SearchBoxStatusChange=0]="SearchBoxStatusChange"})(SearchBoxEvent||(SearchBoxEvent={})),function(n){n[n.Focus=0]="Focus";n[n.Blur=1]="Blur"}(SearchBoxStatus||(SearchBoxStatus={})),function(n){n[n.ShowMiniHeader=0]="ShowMiniHeader";n[n.HideMiniHeader=1]="HideMiniHeader"}(MiniHeaderEvent||(MiniHeaderEvent={})),function(n){function yr(){if(h&&h.lastChild&&GetScrollTop){if(dr(),ut=!0,k){var n=t.gebc("b_scopebar",_d);n&&n.length>0&&(p=n[0])}sj_be(_w,"unload",wt);sj_evt.bind("ajax.unload",wt);sj_evt.bind("ajax.load",ki);y&&sj_be(y,"click",er);wr();gi();di();tr();pr()}}function pr(){var r=h.getBoundingClientRect(),i,n;if(r.bottom<=0)for(i=_d.querySelectorAll("#miniheader a, #miniheader input"),n=0;n<i.length;n++)t.sa(i[n],"tabindex","-1")}function ki(){gi();di();tr();a=_ge(ai);d=_ge(ci);w=_ge(hi)}function di(){typeof MhConfig!="undefined"&&MhConfig&&(MhConfig.is!=null&&(ct=MhConfig.is),MhConfig.sbfc!=null&&(vi=MhConfig.sbfc),MhConfig.edsfs!=null&&(pi=MhConfig.edsfs),MhConfig.psfdss!=null&&(wi=MhConfig.psfdss),MhConfig.ucrs!=null&&(bi=MhConfig.ucrs))}function wr(){for(var r,n=0;n<i.length;n++)r=t.ga(i[n],"type"),r&&(dt[r]=n)}function br(n){for(var t=n,i=0;t;)i+=t.offsetTop,t=t.parentElement;return i}function gi(){var u=_ge("rfPane"),n;u?rt=br(u):(n=_ge("b_header"),rt=n?n.clientHeight:0);var f=nr(),i=t.gcs(h.querySelector("table")),e=i&&!isNaN(parseInt(i.height))?parseInt(i.height):0;v=[0];v[r.Hide]=-(f+e+cr);v[r.Pinned]=-f;v[r.Expand]=0}function nr(){var r=0,n,i;return p&&(n=t.gcs(p),n&&(i=parseInt(n.height),r=isNaN(i)?0:i)),r}function tr(){if(o&&(b=o.querySelector('[name="form"]'),gt=b?b.value:""),u=0,ct==r.Pinned)t.sa(h,"aria-hidden",!1),sj_be(_w,"scroll",fr),ir(),nt(r.Pinned);else if(ct==r.Hide){t.sa(h,"aria-hidden",!0);sj_be(_w,"scroll",vt);nt(r.Hide);var n=GetScrollTop();n>rt?ui():yt();ft=n}i.length>0&&(t.so(i[u],1),t.sdt(i[u],DisplayType.Block));t.sdt(h,DisplayType.Block)}function kr(){var i=_ge("miniheader_logo"),r=t.gfbc("b_searchboxForm"),n,u;bi&&i&&r&&(n=i.firstChild,u=r.firstChild,n&&u&&(t.r(i,n),t.ib(r,n,u)))}function dr(){var n,i,r;s!=null&&e!=null&&o!=null&&(n=t.ga(s,"data-query-override"),e!=null&&n&&(e.value=n),i=t.ga(s,"data-target-override"),o!=null&&i&&t.sa(o,"target",i),r=t.ga(s,"data-action-override"),o!=null&&r&&t.sa(o,"action",r))}function ir(){et&&(sb_ct(et),et=null);o&&s&&(b&&(b.value=vi),a=ii(o,s,ai),f&&a&&f.parentNode&&a.parentNode&&f.parentNode===a.parentNode&&(d=ii(f,s,ci,!0)),e&&(f&&sj_be(f,"mousedown",lt),ot&&sj_be(ot,"mousedown",lt),sj_be(e,"focus",rr),sj_be(e,"blur",at)));p&&k&&(w=ii(p,k,hi));kr();gr()}function gr(){v[r.Pinned]=-nr()}function lt(){sj_ue(e,"blur",at)}function rr(){e&&(ht&&(sb_ct(ht),ht=null),sj_evt.fire(SearchBoxEvent[SearchBoxEvent.SearchBoxStatusChange],SearchBoxStatus.Focus),t.ac(e,"focus"),t.ac(h,"sb-focused"),f&&f.firstChild&&t.sdt(f.firstChild,DisplayType.Block))}function ur(){e&&e.blur()}function at(){f&&f.firstChild&&t.goh(f.firstChild)>0&&t.sdt(f.firstChild,DisplayType.Default);sj_evt.fire(SearchBoxEvent[SearchBoxEvent.SearchBoxStatusChange],SearchBoxStatus.Blur);ht=sb_st(function(){t.rc(e,"focus");t.rc(h,"sb-focused")},ar)}function ii(n,t,i,r){r===void 0&&(r=!1);var u=sj_ce("span",i);return n.parentNode&&n.parentNode.replaceChild(u,n),t.firstChild&&(!r||t.firstElementChild.id===n.id)?t.firstChild.parentNode.replaceChild(n,t.firstChild):t.appendChild(n),u}function nu(){while(s.children.length>0)s.removeChild(s.lastChild)}function tu(){if(or(),o&&a){if(b&&gt&&(b.value=gt),s.firstChild){var n=t.gebc("b_searchboxForm",o);n&&n.length>0&&s.replaceChild(n[0].cloneNode(!0),s.firstChild)}a.parentNode&&a.parentNode.replaceChild(o,a);f&&d&&d.parentNode&&d.parentNode.replaceChild(f,d)}p&&w&&k.firstChild&&(k.replaceChild(w.cloneNode(!0),k.firstChild),w.parentNode&&w.parentNode.replaceChild(p,w));et=sb_st(function(){et=null;nu()},1e3)}function fr(){var n=GetScrollTop(),t=n-ft;Math.abs(t)<=yi||(ur(),ft=n)}function vt(){var n=GetScrollTop(),i=n-ft,t,f;Math.abs(i)<=yi||(ur(),n>rt?(ui(),i>0?it==r.Expand&&nt(r.Pinned):i<0&&it==r.Pinned&&nt(r.Expand),t=iu(n),t!==c&&(f=t>c?"down":"up",c=t,pt(c),kt("Change",{Direction:f},l[c]?l[c]:""))):(yt(),u!=0&&(c=0,pt(0))),ft=n)}function iu(n){var i,t;if(tt.length>1){for(i=0,t=1;t<tt.length;t++){if(tt[t]>n)return i;i=t}return i}return pi?Math.min(Math.floor(n/wi),hr):0}function ru(n){return dt[l[n]]?dt[l[n]]:n}function er(){var n=(u+1)%i.length;kt("Click",{Component:"dsselector"},l[n]?l[n]:"",!0);pt(n)}function nt(i){t.smt(h,v[i]);it=i;n.visibleHeight=v[i]-v[r.Hide]}function ui(){it==r.Hide&&(t.sa(h,"aria-hidden",!1),bt(i[u],!0),fi(u),ir(),nt(r.Pinned),ri=sb_gt(),kt("Show",null,l[u]?l[u]:""),sj_evt.fire(MiniHeaderEvent[MiniHeaderEvent.ShowMiniHeader]))}function yt(){it!=r.Hide&&(t.sa(h,"aria-hidden",!0),bt(i[u],!1),nt(r.Hide),tu(),ri&&kt("Hide",{Duration:sb_gt()-ri}),sj_evt.fire(MiniHeaderEvent[MiniHeaderEvent.HideMiniHeader]))}function uu(){if(!ni&&!ut){var n=GetScrollTop();n>rt&&ui();sj_be(_w,"scroll",vt);ut=!0}}function fu(){!ni&&ut&&(yt(),sj_ue(_w,"scroll",vt),ut=!1)}function pt(n){if(i.length>n&&t.gs(i[n],"display")!="block")if(bt(i[u],!1),bt(i[n],!0),typeof ti!="undefined"&&ti){var r=i[u],f=i[n];t.sdt(i[n],DisplayType.Block);n>u?MMCssAnim.animate(r,f,"up"):MMCssAnim.animate(r,f,"down");setTimeout(function(){fi(n);t.sdt(i[u],DisplayType.Default);u=n},500)}else MMAnim.fadeOut(i[u],10),MMAnim.fadeIn(i[n],10,"block",function(){fi(n);t.sdt(i[u],DisplayType.Default);u=n})}function fi(n){if(y){g||(g=t.gebc("indic",y));g.length>u&&g.length>n&&(t.rc(g[u],"sel"),t.ac(g[n],"sel"));var f=(n+1)%i.length,r=t.gebc("lt",i[f]);r&&r.length>0&&t.sa(y,"title",r[0].innerHTML)}}function wt(){sj_ue(_w,"unload",wt);sj_evt.unbind("ajax.unload",wt);sj_evt.unbind("ajax.load",ki);sj_ue(_w,"scroll",vt);sj_ue(_w,"scroll",fr);y&&sj_ue(y,"click",er);e&&at();ct==r.Hide?yt():o&&li&&t.a(li,o);ni=!0;or()}function or(){e&&(f&&sj_ue(f,"mousedown",lt),ot&&sj_ue(ot,"mousedown",lt),sj_ue(e,"focus",rr),sj_ue(e,"blur",at))}function bt(n,i){n&&t.ga(n,"data-tag")&&t.sa(n,"data-tag","multimedia.miniHeaderData"+(i?"Visible":""))}function kt(n,t,i,r){if(vr||r){var u=i?i:n;ei[u]||(i&&(t||(t={}),t.Dataset=i),sr.logEvent(null,"CI."+n,null,"miniheader",t,null),ei[u]=!0)}}function eu(n,t){var i,r;st[n]||(st[n]=tt.length);t=t+(oi?oi.offsetTop:0)+lr;i=st[n];tt[i]=t;l[i]=n;r=GetScrollTop();r>t&&(c=st[n],pt(ru(c)))}var t=pMMUtils,sr=pInstr,h=_ge("miniheader"),si=_ge("miniheader_data"),i=si?si.children:[],hr=i.length,y=_ge("miniheader_switch"),k=_ge("miniheader_scope"),p,s=_ge("miniheader_searchbox"),w,hi="scope_pl",d,ci="as_pl",f=_ge("sw_as"),e=_ge("sb_form_q"),ot=_ge("sb_form_go"),tt=[0],l=["RelatedSearch"],dt={},st={},u,it,r,et,c,ri,ei,oi;(function(n){n[n.Hide=0]="Hide";n[n.Pinned=1]="Pinned";n[n.Expand=2]="Expand"})(r||(r={}));var v,o=_ge("sb_form"),li=o?o.parentNode:null,a,ai="search_pl",rt=0,ut;n.visibleHeight=0;var gt,vi="QBIRMH",b,cr=10,lr=75,g,yi=30,ar=300,ht,vr=!1,ni=!1,ft=0,ct=r.Hide,pi=!1,wi=1e3,bi=!1,ti;typeof MMCssAnim!="undefined"&&MMCssAnim&&(ti=MMCssAnim);n.init=yr;c=0;n.enable=uu;n.disable=fu;ei={};oi=_ge("vm_res")||_ge("vm_c");n.registerInlineBlock=eu}(MiniHeader||(MiniHeader={}));MiniHeader.init()